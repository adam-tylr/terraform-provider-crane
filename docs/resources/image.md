---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "crane_image Resource - terraform-provider-crane"
subcategory: ""
description: |-
  Push or copy an image to a remote repository.
  This resource is designed to support both Terraform and externally managed roll out and roll back of images which means:
  Resource deletion will not delete images or tags from the destination repository. Use lifecycle policies to manage image retention.Resource creation will not fail if the image already exists in the destination repository with the same digest.
---

# crane_image (Resource)

Push or copy an image to a remote repository. 
		
This resource is designed to support both Terraform and externally managed roll out and roll back of images which means:

- Resource deletion will not delete images or tags from the destination repository. Use lifecycle policies to manage image retention.
- Resource creation will not fail if the image already exists in the destination repository with the same digest.

## Example Usage

```terraform
resource "crane_image" "example" {
  source      = "alpine:3.22.2"
  destination = "my-registry.local/alpine:3.22.2"
}

resource "crane_image" "from_file" {
  source      = "path/to/local/image-1.2.3.tar"
  destination = "my-registry.local/my-image:latest"
}

# When source is a mutable tagged remote image, use a crane_digest data source with source_digest to trigger updates
resource "crane_image" "mutable_tag" {
  source        = "nginx:latest"
  source_digest = data.crane_digest.mutable_tag.digest
  destination   = "my-registry.local/nginx:stable"
}

data "crane_digest" "mutable_tag" {
  reference = "nginx:latest"
}

# When source is a mutable file, use filemd5 or filesha256 with source_digest to trigger updates
resource "crane_image" "mutable_file" {
  source        = "path/to/local/image.tar"
  source_digest = filemd5("path/to/local/image.tar")
  destination   = "my-registry.local/nginx:stable"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `destination` (String) The destination to push the image to (`registry/repo` or `registry/repo:tag`).
- `source` (String) A remote image reference or path to a local docker-style tarball.

### Optional

- `platform` (String) If source is a multi-architecture image, limit copy to a specific platform in the form os/arch[/variant][:osversion] (e.g. linux/amd64). (default all)
- `source_digest` (String) Used to trigger updates for mutable tags. Set using `filemd5` for a local file or the `crane_digest` data source for a remote image.

### Read-Only

- `digest` (String) The digest of the destination image.
- `id` (String) Equivalent to `reference`.
- `reference` (String) The destination image reference including the tag or digest.
